(this["webpackJsonpnd0191-myreads-starter"]=this["webpackJsonpnd0191-myreads-starter"]||[]).push([[0],{18:function(e,t,s){},20:function(e,t,s){},21:function(e,t,s){"use strict";s.r(t);var n=s(1),o=s.n(n),c=s(14),a=s.n(c),r=(s(18),s(8)),i=s(9),l=s(11),h=s(10),b=s(4),d=s(7),j="https://reactnd-books-api.udacity.com",u=localStorage.token;u||(u=localStorage.token=Math.random().toString(36).substr(-8));var f={Accept:"application/json",Authorization:u},k=function(){return fetch("".concat(j,"/books"),{headers:f}).then((function(e){return e.json()})).then((function(e){return e.books}))},O=function(e,t){return fetch("".concat(j,"/books/").concat(e.id),{method:"PUT",headers:Object(d.a)(Object(d.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},x=function(e,t){return fetch("".concat(j,"/search"),{method:"POST",headers:Object(d.a)(Object(d.a)({},f),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))},m=s(6),v=s(0);var p=function(e){var t;return t=e.book.imageLinks?e.book.imageLinks.thumbnail:"",Object(v.jsxs)("div",{className:"book",children:[Object(v.jsxs)("div",{className:"book-top",children:[Object(v.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:'url("'.concat(t,'")')}}),Object(v.jsx)("div",{className:"book-shelf-changer",children:Object(v.jsxs)("select",{onChange:function(t){return e.shelfChange(e.book,t.target.value)},value:e.currentShelf,children:[Object(v.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(v.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(v.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(v.jsx)("option",{value:"read",children:"Read"}),Object(v.jsx)("option",{value:"none",children:"None"})]})})]}),Object(v.jsx)("div",{className:"book-title",children:e.book.title}),Object(v.jsx)("div",{className:"book-authors",children:e.book.authors})]})},g=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={query:"",searchedBooks:[]},e.updateQuery=function(t){var s=t.replace(/^\s+/,"");e.setState({query:s}),e.fetchSearchedBooks(t)},e.fetchSearchedBooks=function(t){0!==t.length?x(t).then((function(t){t.error?e.setState({searchedBooks:[]}):e.setState({searchedBooks:t})})):e.setState({searchedBooks:[]})},e}return Object(i.a)(s,[{key:"render",value:function(){var e=this;return Object(v.jsxs)("div",{className:"search-books",children:[Object(v.jsxs)("div",{className:"search-books-bar",children:[Object(v.jsx)(m.b,{className:"close-search",to:"/",children:"Close"}),Object(v.jsx)("div",{className:"search-books-input-wrapper",children:Object(v.jsx)("input",{type:"text",placeholder:"Search by title or author",value:this.state.query,onChange:function(t){return e.updateQuery(t.target.value)}})})]}),Object(v.jsx)("div",{className:"search-books-results",children:Object(v.jsx)("ol",{className:"books-grid",children:this.state.searchedBooks.map((function(t){var s="none";return e.props.books.forEach((function(e){e.id!==t.id?t.shelf="none":s=e.shelf})),Object(v.jsx)("li",{children:Object(v.jsx)(p,{book:t,shelfChange:e.props.shelfChange,currentShelf:s})},t.id)}))})})]})}}]),s}(b.Component);var y=function(e){return Object(v.jsxs)("div",{className:"list-books",children:[Object(v.jsx)("div",{className:"list-books-title",children:Object(v.jsx)("h1",{children:"My Reads"})}),Object(v.jsx)("div",{className:"list-book-content",children:Object(v.jsxs)("div",{children:[Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)("ol",{className:"books-grid",children:e.books.filter((function(e){return"currentlyReading"===e.shelf})).map((function(t){return Object(v.jsx)("li",{children:Object(v.jsx)(p,{book:t,shelfChange:e.shelfChange,currentShelf:"currentlyReading"})},t.id)}))})})]}),Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:"Want To Read"}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)("ol",{className:"books-grid",children:e.books.filter((function(e){return"wantToRead"===e.shelf})).map((function(t){return Object(v.jsx)("li",{children:Object(v.jsx)(p,{book:t,shelfChange:e.shelfChange,currentShelf:"wantToRead"})},t.id)}))})})]}),Object(v.jsxs)("div",{className:"bookshelf",children:[Object(v.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(v.jsx)("div",{className:"bookshelf-books",children:Object(v.jsx)("ol",{className:"books-grid",children:e.books.filter((function(e){return"read"===e.shelf})).map((function(t){return Object(v.jsx)("li",{children:Object(v.jsx)(p,{book:t,shelfChange:e.shelfChange,currentShelf:"read"})},t.id)}))})})]})]})}),Object(v.jsx)("div",{className:"open-search",children:Object(v.jsx)(m.b,{to:"/search",children:"seacrh book"})})]})},N=(s(20),s(2)),C=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(){var e;Object(r.a)(this,s);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(e=t.call.apply(t,[this].concat(o))).state={books:[]},e.shelfChange=function(t,s){O(t,s),k().then((function(t){e.setState({books:t})}))},e}return Object(i.a)(s,[{key:"componentDidMount",value:function(){var e=this;k().then((function(t){e.setState({books:t})}))}},{key:"render",value:function(){return Object(v.jsx)("div",{className:"app",children:Object(v.jsx)(m.a,{children:Object(v.jsxs)(N.c,{children:[Object(v.jsx)(N.a,{exact:!0,path:"/",element:Object(v.jsx)(y,{books:this.state.books,shelfChange:this.shelfChange})}),Object(v.jsx)(N.a,{exact:!0,path:"/search",element:Object(v.jsx)(g,{shelfChange:this.shelfChange,books:this.state.books})})]})})})}}]),s}(b.Component);a.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(C,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.d38780a5.chunk.js.map